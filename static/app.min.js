(function(c,d){var n=function(a,k){u.style.display="block";c.getElementById("loader-content").style.display="none";(f=c.getElementById("loader-error")).style.display="block";a&&(f.innerHTML=a,a.replace("<br>"," "))};try{var m,h,b,e,g,r,p=0,x=100,t,q=c.getElementById("cms-graph"),u=c.getElementById("loader"),f=c.getElementsByTagName("noscript")[0],l=c.getElementById("psa"),z=c.getElementById("js-refresh");f&&f.parentNode.removeChild(f);var v=function(){0>=p?(p=45,A()):(setTimeout(v,1E3),z.textContent=
10>--p?"0"+p:p)},A=function(){u.style.display="block";e=new XMLHttpRequest;e.open("GET","https://crowbar.steamdb.info/Barney",!0);e.onreadystatechange=B;e.ontimeout=function(){n("Request timed out.<br>Reload the page manually.")};e.timeout=2E4;e.send()},B=function(){e=this;if(4===e.readyState){b=e.responseText;try{u.style.display="none";if(200!==e.status)return n("","Status: "+e.status);if(null===b||"{"!==b[0])return n("Received invalid data.<br>Is something wrong with your network?");b=JSON.parse(b);
g=b.psa||"";r=Math.abs(Date.now()/1E3-b.time);300<r&&(g&&(g+="<hr>"),g+="Data appears to be "+(0|r/60)+" minutes old.",3E3<r&&(g+=' <a href="http://time.is" target="_blank">Is your clock out of sync?</a>'));g?("block"!==l.style.display&&(l.style.display="block"),l.innerHTML!==g&&(l.innerHTML=g)):"none"!==l.style.display&&(l.innerHTML="",l.style.display="none");if(75>x&&75<=b.online&&"Notification"in d&&"granted"===d.Notification.permission){var a=new d.Notification("Steam is back online",{lang:"en",
icon:"/static/logos/192px.png",body:b.online+"% of Steam servers are online, you could try logging in now."});setTimeout(function(){a.close()},5E3)}x=b.online;b=b.services;for(m in b)if(f=c.getElementById(m))h=b[m],h.status&&(m="status "+h.status,f.className!==m&&(f.className=m)),h.time?f.innerHTML=h.title+' <span class="time" title="Time since last status change">('+C(h.time)+")</span>":f.textContent?f.textContent=h.title:f.innerText=h.title;v()}catch(k){n(""),console.debug("Status:",e.status,e.statusText),
console.debug("Data:",b)}}},C=function(a){a=Date.now()-1E3*a;return 6E4>a?"<1m":36E5>a?Math.round(a/6E4)+"m":864E5>a?Math.round(a/36E5)+"h":2592E6>a?"\u2248"+Math.round(a/864E5)+"d":31536E6>a?"\u2248"+Math.round(a/2592E6)+"m":"\u2248"+Math.round(a/31536E6)+"y"},D=function(a){var k="show_"+a,b=c.getElementById("js-"+a+"-container"),e=c.getElementById("js-"+a+"-caret");d.localStorage.getItem(k)&&(b.classList.remove("closed"),e.classList.add("up"));c.getElementById("js-"+a+"-services").addEventListener("click",
function(a){a.preventDefault();b.classList.contains("closed")?(b.classList.remove("closed"),d.localStorage.setItem(k,"1"),e.classList.add("up")):(b.classList.add("closed"),d.localStorage.removeItem(k),e.classList.remove("up"))})},y=function(){if(t)if("Highcharts"in d){var a=new Date;a.setDate(a.getDate()-1);new d.Highcharts.Chart({plotOptions:{series:{animation:!1,color:"#4384D8"}},chart:{renderTo:q,backgroundColor:"#282936",spacing:[5,0,0,0],style:{fontFamily:"'Open Sans', sans-serif"}},title:{text:null},
credits:{enabled:!1},exporting:{enabled:!1},rangeSelector:{enabled:!1},scrollbar:{enabled:!1},navigator:{enabled:!1},tooltip:{enabled:!1},legend:{enabled:!1},xAxis:{type:"datetime",labels:{style:{color:"#9E9E9E"}},lineWidth:0,tickWidth:0},yAxis:{gridLineColor:"#3A3B47",title:{text:"Online CMs Today",style:{color:"#8A8DB7"}},labels:{format:"{value}%",style:{color:"#9E9E9E"}},showLastLabel:!0,tickPositions:[0,25,50,75,100],min:0,max:100,allowDecimals:!1,startOnTick:!1,endOnTick:!1},series:[{pointStart:a.getTime(),
pointInterval:3E4,data:t,marker:{enabled:!1},states:{hover:{enabled:!1}}}]});t=null}else q.innerHTML="Failed to load Highcharts.<br>Please unblock <b>cdnjs.cloudflare.com</b> for this to work."},w=function(){var a=new XMLHttpRequest;a.open("GET","https://crowbar.steamdb.info/Gina",!0);a.onreadystatechange=function(){try{4===a.readyState&&(b=JSON.parse(a.responseText),b.data?(t=b.data,"Highcharts"in d&&y()):q.textContent="Failed to load graph data: Failed to parse JSON.")}catch(k){q.textContent="Failed to load graph data: "+
(k.message||"Unknown error.")}};a.ontimeout=function(){q.textContent="Request timed out, unable to render graph."};a.timeout=1E4;a.send()};d.RenderChart=y;d.UpdateGraph=w;v();w();setInterval(w,6E5);d.Notification&&"denied"!==d.Notification.permission&&d.Notification.requestPermission();d.localStorage&&D("csgo");"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js",{scope:"./"});d.addEventListener("beforeinstallprompt",function(a){a.userChoice.then(function(a){"ga"in d&&
d.ga("send","event","Install Prompt","Outcome",a.outcome)})})}catch(a){n("Something broke.<br>"+(a.message||"Are you using an outdated browser?")),console.error(a)}(function(){var a=navigator.doNotTrack||d.doNotTrack||navigator.msDoNotTrack,b=navigator.userAgent,e=["Windows NT 6.1","Windows NT 6.2","Windows NT 6.3"],c=b.match(/Firefox\/(\d+)/),f=/MSIE|Trident/i.test(b),b=b.match(/Windows.+?(?=;)/g);if(f&&"function"!==typeof Array.prototype.indexOf)return!1;a=c&&32>parseInt(c[1],10)?"Unspecified":
f&&b&&-1!==e.indexOf(b.toString())?"Unspecified":{0:"Disabled",1:"Enabled"}[a]||"Unspecified";return"Enabled"===a?!0:!1})()||(function(a,b,d,e,c,f,g){a.GoogleAnalyticsObject=c;a[c]=a[c]||function(){(a[c].q=a[c].q||[]).push(arguments)};a[c].l=1*new Date;f=b.createElement(d);g=b.getElementsByTagName(d)[0];f.async=1;f.src=e;g.parentNode.insertBefore(f,g)}(d,c,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-37177069-4","steamstat.us"),ga("set","forceSSL",!0),ga("send","pageview"),
function(a,b,c){var d=a.getElementsByTagName(b)[0],e=/^http:/.test(a.location)?"http":"https";a.getElementById(c)||(a=a.createElement(b),a.id=c,a.src=e+"://platform.twitter.com/widgets.js",d.parentNode.insertBefore(a,d))}(c,"script","twitter-wjs"))})(document,window);
