(function(c,q,g){try{var l,h,b,d,f,r,n=0,w=100,t,p=c.getElementById("cms-graph"),u=c.getElementById("loader"),e=c.getElementsByTagName("noscript")[0],k=c.getElementById("psa"),x=c.getElementById("js-refresh"),m=function(a){u.style.display="block";c.getElementById("loader-content").style.display="none";(e=c.getElementById("loader-error")).style.display="block";a&&(e.innerHTML=a,a.replace("<br>"," "))},v=function(){0>=n?(n=45,y()):(setTimeout(v,1E3),x.textContent=10>--n?"0"+n:n)},y=function(){u.style.display=
"block";d=new XMLHttpRequest;d.open("GET","https://crowbar.steamdb.info/Barney",!0);d.onreadystatechange=z;d.ontimeout=function(){m("Request timed out.<br>Reload the page manually.")};d.timeout=2E4;d.send()},z=function(){d=this;if(4===d.readyState){b=d.responseText;try{u.style.display="none";if(200!==d.status)return m("");if(null===b||"{"!==b[0])return m("Received invalid data.<br>Is something wrong with your network?");b=JSON.parse(b);if(!b.success)return m("");f=b.psa||"";r=Math.abs(Date.now()/
1E3-b.time);300<r&&(f&&(f+="<hr>"),f+="Data appears to be "+(0|r/60)+" minutes old.",3E3<r&&(f+=' <a href="http://time.is" target="_blank">Is your clock out of sync?</a>'));f?("block"!==k.style.display&&(k.style.display="block"),k.innerHTML!==f&&(k.innerHTML=f)):"none"!==k.style.display&&(k.innerHTML="",k.style.display="none");if(75>w&&75<=b.online&&g&&"granted"===g.permission){var a=new g("Steam is back online",{lang:"en",icon:"/static/logos/192px.png",body:b.online+"% of Steam servers are online, you could try logging in now."});
setTimeout(function(){a.close()},5E3)}w=b.online;b=b.services;for(l in b)if(e=c.getElementById(l))h=b[l],h.status&&(l="status "+h.status,e.className!==l&&(e.className=l)),h.time?e.innerHTML=h.title+' <span class="time" title="Time since last status change">('+A(h.time)+")</span>":e.textContent?e.textContent=h.title:e.innerText=h.title;v()}catch(C){m(""),console.debug("Status:",d.status,d.statusText),console.debug("Data:",b)}}},A=function(a){a=Date.now()-1E3*a;return 6E4>a?"<1m":36E5>a?Math.round(a/
6E4)+"m":864E5>a?Math.round(a/36E5)+"h":2592E6>a?"\u2248"+Math.round(a/864E5)+"d":31536E6>a?"\u2248"+Math.round(a/2592E6)+"m":"\u2248"+Math.round(a/31536E6)+"y"},B=function(){var a=c.getElementById("js-csgo-container"),b=c.getElementById("js-csgo-caret");q.getItem("show_csgo")&&(a.classList.remove("closed"),b.classList.add("up"));c.getElementById("js-csgo-services").addEventListener("click",function(c){c.preventDefault();a.classList.contains("closed")?(a.classList.remove("closed"),q.setItem("show_csgo",
1),b.classList.add("up")):(a.classList.add("closed"),q.removeItem("show_csgo"),b.classList.remove("up"))})};e&&e.parentNode.removeChild(e);v();(function(){var a=new XMLHttpRequest;a.open("GET","https://crowbar.steamdb.info/Gina",!0);a.onreadystatechange=function(){try{4===a.readyState&&(b=JSON.parse(a.responseText),b.success?(t=b.data,"Highcharts"in window&&RenderChart()):p.textContent="Failed to load graph data.")}catch(c){p.textContent="Failed to load graph data."}};a.ontimeout=function(){p.textContent=
"Request timed out, unable to render graph."};a.timeout=1E4;a.send()})();!q||g&&!g.permission||!Element.prototype.addEventListener?c.getElementById("old-browser").style.display="block":(B(),g&&"denied"!==g.permission&&g.requestPermission());window.RenderChart=function(){if(t)if("Highcharts"in window){var a=new Date;a.setDate(a.getDate()-1);new window.Highcharts.Chart({s:{a:{c:!1,color:"#4384D8"}},f:{A:p,backgroundColor:"#282936",D:[5,0,0,0],style:{fontFamily:"'Open Sans', sans-serif"}},title:{text:null},
g:{enabled:!1},i:{enabled:!1},w:{enabled:!1},B:{enabled:!1},navigator:{enabled:!1},J:{enabled:!1},m:{enabled:!1},L:{type:"datetime",labels:{style:{color:"#9E9E9E"}},lineWidth:0,I:0},M:{j:"#3A3B47",title:{text:"Online CMs Today",style:{color:"#8A8DB7"}},labels:{format:"{value}%",style:{color:"#9E9E9E"}},C:!0,H:[0,25,50,75,100],min:0,max:100,b:!1,F:!1,h:!1},a:[{v:a.getTime(),u:3E4,data:t,o:{enabled:!1},G:{l:{enabled:!1}}}]});t=null}else p.innerHTML="Failed to load Highcharts.<br>Please unblock <b>cdnjs.cloudflare.com</b> for this to work."};
"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js",{scope:"./"});window.addEventListener("beforeinstallprompt",function(a){a.K.then(function(a){ga&&ga("send","event","Install Prompt","Outcome",a.outcome)})})}catch(a){m("Something broke.<br>"+(a.message||"Are you using an outdated browser?")),console.error(a)}})(document,localStorage,Notification);
