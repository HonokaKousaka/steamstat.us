(function(b){try{var g,f,c,d,e,k,m=0,v=100,q,n=b.getElementById("cms-graph"),r=b.getElementById("loader"),h=b.getElementsByTagName("noscript")[0],l=b.getElementById("psa"),x=b.getElementById("js-refresh"),p=function(a,c){r.style.display="block";b.getElementById("loader-content").style.display="none";(h=b.getElementById("loader-error")).style.display="block";a&&(h.innerHTML=a,a.replace("<br>"," "))},t=function(){0>=m?(m=45,y()):(setTimeout(t,1E3),x.textContent=10>--m?"0"+m:m)},y=function(){r.style.display=
"block";d=new XMLHttpRequest;d.open("GET","https://crowbar.steamdb.info/Barney",!0);d.onreadystatechange=z;d.ontimeout=function(){p("Request timed out.<br>Reload the page manually.")};d.timeout=2E4;d.send()},z=function(){d=this;if(4===d.readyState){c=d.responseText;try{r.style.display="none";if(200!==d.status)return p("","Status: "+d.status);if(null===c||"{"!==c[0])return p("Received invalid data.<br>Is something wrong with your network?");c=JSON.parse(c);e=c.psa||"";k=Math.abs(Date.now()/1E3-c.time);
300<k&&(e&&(e+="<hr>"),e+="Data appears to be "+(0|k/60)+" minutes old.",3E3<k&&(e+=' <a href="http://time.is" target="_blank">Is your clock out of sync?</a>'));e?("block"!==l.style.display&&(l.style.display="block"),l.innerHTML!==e&&(l.innerHTML=e)):"none"!==l.style.display&&(l.innerHTML="",l.style.display="none");if(75>v&&75<=c.online&&"Notification"in window&&"granted"===window.Notification.permission){var a=new window.Notification("Steam is back online",{lang:"en",icon:"/static/logos/192px.png",
body:c.online+"% of Steam servers are online, you could try logging in now."});setTimeout(function(){a.close()},5E3)}v=c.online;c=c.services;for(g in c)if(h=b.getElementById(g))f=c[g],f.status&&(g="status "+f.status,h.className!==g&&(h.className=g)),f.time?h.innerHTML=f.title+' <span class="time" title="Time since last status change">('+A(f.time)+")</span>":h.textContent?h.textContent=f.title:h.innerText=f.title;t()}catch(C){p(""),console.debug("Status:",d.status,d.statusText),console.debug("Data:",
c)}}},A=function(a){a=Date.now()-1E3*a;return 6E4>a?"<1m":36E5>a?Math.round(a/6E4)+"m":864E5>a?Math.round(a/36E5)+"h":2592E6>a?"\u2248"+Math.round(a/864E5)+"d":31536E6>a?"\u2248"+Math.round(a/2592E6)+"m":"\u2248"+Math.round(a/31536E6)+"y"},B=function(a){var c="show_"+a,d=b.getElementById("js-"+a+"-container"),e=b.getElementById("js-"+a+"-caret");window.localStorage.getItem(c)&&(d.classList.remove("closed"),e.classList.add("up"));b.getElementById("js-"+a+"-services").addEventListener("click",function(a){a.preventDefault();
d.classList.contains("closed")?(d.classList.remove("closed"),window.localStorage.setItem(c,"1"),e.classList.add("up")):(d.classList.add("closed"),window.localStorage.removeItem(c),e.classList.remove("up"))})},w=function(){if(q)if("Highcharts"in window){var a=new Date;a.setDate(a.getDate()-1);new window.Highcharts.Chart({plotOptions:{series:{animation:!1,color:"#4384D8"}},chart:{renderTo:n,backgroundColor:"#282936",spacing:[5,0,0,0],style:{fontFamily:"'Open Sans', sans-serif"}},title:{text:null},credits:{enabled:!1},
exporting:{enabled:!1},rangeSelector:{enabled:!1},scrollbar:{enabled:!1},navigator:{enabled:!1},tooltip:{enabled:!1},legend:{enabled:!1},xAxis:{type:"datetime",labels:{style:{color:"#9E9E9E"}},lineWidth:0,tickWidth:0},yAxis:{gridLineColor:"#3A3B47",title:{text:"Online CMs Today",style:{color:"#8A8DB7"}},labels:{format:"{value}%",style:{color:"#9E9E9E"}},showLastLabel:!0,tickPositions:[0,25,50,75,100],min:0,max:100,allowDecimals:!1,startOnTick:!1,endOnTick:!1},series:[{pointStart:a.getTime(),pointInterval:3E4,
data:q,marker:{enabled:!1},states:{hover:{enabled:!1}}}]});q=null}else n.innerHTML="Failed to load Highcharts.<br>Please unblock <b>cdnjs.cloudflare.com</b> for this to work."},u=function(){var a=new XMLHttpRequest;a.open("GET","https://crowbar.steamdb.info/Gina",!0);a.onreadystatechange=function(){try{4===a.readyState&&(c=JSON.parse(a.responseText),c.data?(q=c.data,"Highcharts"in window&&w()):n.textContent="Failed to load graph data: Failed to parse JSON.")}catch(b){n.textContent="Failed to load graph data: "+
(b.message||"Unknown error.")}};a.ontimeout=function(){n.textContent="Request timed out, unable to render graph."};a.timeout=1E4;a.send()};h&&h.parentNode.removeChild(h);t();u();setInterval(u,6E5);!("localStorage"in window)||"Notification"in window&&!window.Notification.permission||!Element.prototype.addEventListener?b.getElementById("old-browser").style.display="block":(B("csgo"),window.Notification&&"denied"!==window.Notification.permission&&window.Notification.requestPermission());window.RenderChart=
w;window.UpdateGraph=u;"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js",{scope:"./"});window.addEventListener("beforeinstallprompt",function(a){a.userChoice.then(function(a){"ga"in window&&window.ga("send","event","Install Prompt","Outcome",a.outcome)})})}catch(a){p("Something broke.<br>"+(a.message||"Are you using an outdated browser?")),console.error(a)}})(document);
(function(b,g,f,c,d,e,k){b.GoogleAnalyticsObject=d;b[d]=b[d]||function(){(b[d].q=b[d].q||[]).push(arguments)};b[d].l=1*new Date;e=g.createElement(f);k=g.getElementsByTagName(f)[0];e.async=1;e.src=c;k.parentNode.insertBefore(e,k)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga");ga("create","UA-37177069-4","steamstat.us");ga("set","forceSSL",!0);ga("send","pageview");
(function(b,g,f){var c=b.getElementsByTagName(g)[0],d=/^http:/.test(b.location)?"http":"https";b.getElementById(f)||(b=b.createElement(g),b.id=f,b.src=d+"://platform.twitter.com/widgets.js",c.parentNode.insertBefore(b,c))})(document,"script","twitter-wjs");
