(function(e,q,g){try{var l,h,b,c,f,r,m=0,w=100,t,p=e.getElementById("cms-graph"),u=e.getElementById("loader"),d=e.getElementsByTagName("noscript")[0],k=e.getElementById("psa"),x=e.getElementById("js-refresh"),n=function(a,b){u.style.display="block";e.getElementById("loader-content").style.display="none";(d=e.getElementById("loader-error")).style.display="block";a?(d.innerHTML=a,a=a.replace("<br>"," ")):a="AJAX Error: "+b;ga&&ga("send","event","Error","ShowError",a)},v=function(){0>=m?(m=45,y()):(setTimeout(v,
1E3),x.textContent=10>--m?"0"+m:m)},y=function(){u.style.display="block";c=new XMLHttpRequest;c.open("GET","https://crowbar.steamdb.info/Barney",!0);c.onreadystatechange=z;c.ontimeout=function(){n("Request timed out.<br>Reload the page manually.")};c.timeout=2E4;c.send()},z=function(){c=this;if(4===c.readyState){b=c.responseText;try{u.style.display="none";if(200!==c.status)return n("","Status: "+c.status);if(null===b||"{"!==b[0])return n("Received invalid data.<br>Is something wrong with your network?");
b=JSON.parse(b);if(!b.success)return n("","Success = false");f=b.psa||"";r=Math.abs(Date.now()/1E3-b.time);300<r&&(f&&(f+="<hr>"),f+="Data appears to be "+(0|r/60)+" minutes old.",3E3<r&&(f+=' <a href="http://time.is" target="_blank">Is your clock out of sync?</a>'));f?("block"!==k.style.display&&(k.style.display="block"),k.innerHTML!==f&&(k.innerHTML=f)):"none"!==k.style.display&&(k.innerHTML="",k.style.display="none");if(75>w&&75<=b.online&&g&&"granted"===g.permission){var a=new g("Steam is back online",
{lang:"en",icon:"/static/logos/192px.png",body:b.online+"% of Steam servers are online, you could try logging in now."});setTimeout(function(){a.close()},5E3)}w=b.online;b=b.services;for(l in b)if(d=e.getElementById(l))h=b[l],h.status&&(l="status "+h.status,d.className!==l&&(d.className=l)),h.time?d.innerHTML=h.title+' <span class="time" title="Time since last status change">('+A(h.time)+")</span>":d.textContent?d.textContent=h.title:d.innerText=h.title;v()}catch(m){n(""),console.debug("Status:",
c.status,c.statusText),console.debug("Data:",b)}}},A=function(a){a=Date.now()-1E3*a;return 6E4>a?"<1m":36E5>a?Math.round(a/6E4)+"m":864E5>a?Math.round(a/36E5)+"h":2592E6>a?"\u2248"+Math.round(a/864E5)+"d":31536E6>a?"\u2248"+Math.round(a/2592E6)+"m":"\u2248"+Math.round(a/31536E6)+"y"},B=function(a){var b="show_"+a,c=e.getElementById("js-"+a+"-container"),d=e.getElementById("js-"+a+"-caret");q.getItem(b)&&(c.classList.remove("closed"),d.classList.add("up"));e.getElementById("js-"+a+"-services").addEventListener("click",
function(a){a.preventDefault();c.classList.contains("closed")?(c.classList.remove("closed"),q.setItem(b,1),d.classList.add("up")):(c.classList.add("closed"),q.removeItem(b),d.classList.remove("up"))})};d&&d.parentNode.removeChild(d);v();(function(){var a=new XMLHttpRequest;a.open("GET","https://crowbar.steamdb.info/Gina",!0);a.onreadystatechange=function(){try{4===a.readyState&&(b=JSON.parse(a.responseText),b.success?(t=b.data,window.Highcharts&&RenderChart()):p.textContent="Failed to load graph data.")}catch(c){p.textContent=
"Failed to load graph data."}};a.ontimeout=function(){p.textContent="Request timed out, unable to render graph."};a.timeout=1E4;a.send()})();!q||g&&!g.permission||!Element.prototype.addEventListener?e.getElementById("old-browser").style.display="block":(B("csgo"),g&&"denied"!==g.permission&&g.requestPermission());window.RenderChart=function(){if(t)if(window.Highcharts){var a=new Date;a.setDate(a.getDate()-1);new window.Highcharts.Chart({plotOptions:{series:{animation:!1,color:"#4384D8"}},chart:{renderTo:p,
backgroundColor:"#282936",spacing:[5,0,0,0],style:{fontFamily:"'Open Sans', sans-serif"}},title:{text:null},credits:{enabled:!1},exporting:{enabled:!1},rangeSelector:{enabled:!1},scrollbar:{enabled:!1},navigator:{enabled:!1},tooltip:{enabled:!1},legend:{enabled:!1},xAxis:{type:"datetime",labels:{style:{color:"#9E9E9E"}},lineWidth:0,tickWidth:0},yAxis:{gridLineColor:"#3A3B47",title:{text:"Online CMs Today",style:{color:"#8A8DB7"}},labels:{format:"{value}%",style:{color:"#9E9E9E"}},showLastLabel:!0,
tickPositions:[0,25,50,75,100],min:0,max:100,allowDecimals:!1,startOnTick:!1,endOnTick:!1},series:[{pointStart:a.getTime(),pointInterval:3E4,data:t,marker:{enabled:!1},states:{hover:{enabled:!1}}}]});t=null}else p.innerHTML="Failed to load Highcharts.<br>Please unblock <b>cdnjs.cloudflare.com</b> for this to work."};"serviceWorker"in navigator&&navigator.serviceWorker.register("/static/service-worker.js")}catch(a){n("Something broke.<br>Are you using an outdated browser?"),ga&&ga("send","event","Error",
"ShowError",a.message||"try-catch"),console.error(a)}})(document,localStorage,window.Notification);
